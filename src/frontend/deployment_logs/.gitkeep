# Deployment Logs Directory

This directory stores timestamped deployment logs and canister ID artifacts generated by the deployment scripts.

## Generated Files

The deployment scripts write the following files to this directory:

### redeploy_production.sh (Standard Redeploy)
- **`deploy_[timestamp].log`**: Complete deployment log capturing all stdout/stderr from the build and deploy process
- **`canister_ids_[timestamp].txt`**: Summary file containing both frontend and backend canister IDs, plus injected build metadata for verification

### clean_redeploy_production.sh (Clean Rebuild + Redeploy)
- **`deploy_[timestamp].log`**: Complete deployment log including clean step output
- **`canister_ids_[timestamp].txt`**: Summary file with canister IDs, build metadata, and clean rebuild indicator

## Purpose

These files are essential for:
- Verifying successful deployments
- Troubleshooting deployment failures
- Cross-checking diagnostics indicator values against deployed build metadata
- Maintaining deployment history
- Auditing production releases
- Confirming clean rebuilds were performed when needed

## Build Metadata Injection

Both deployment scripts automatically inject build metadata during production builds:
- `VITE_BUILD_VERSION`: Timestamp-based version identifier
- `VITE_GIT_COMMIT`: Git commit hash (if available)
- `VITE_BUILD_TIMESTAMP`: ISO 8601 build timestamp

This ensures the diagnostics indicator in production displays accurate build information instead of "Unknown" or "vdev-unknown".

## Clean Rebuild Script

The `clean_redeploy_production.sh` script performs additional steps before building:
1. Removes `frontend/dist` (prior build output)
2. Removes Vite caches (`frontend/node_modules/.vite`, `frontend/.vite`)
3. Performs a completely fresh build with no cached artifacts

Use this script when:
- Production hangs on "Connecting to backend..." after a deploy
- Diagnostics indicator shows stale/old canister IDs
- Suspected cached build artifacts are causing issues
- After major backend changes or canister ID changes

## Usage

After running a deployment script, review the generated files:

